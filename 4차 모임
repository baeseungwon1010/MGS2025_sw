일시: 2025.08.17 20:40~23:40
장소: 온라인(google meet)
활동 요약: 모의 해킹, 시나리오 풀이 및 공유
참여자: 김채윤, 박기조, 배승원, 이효관, 임성주

시나리오: 웹서비스를 이용하여 서버에 침투하고 이를 이용해 flag를 휙득하라시: 2025.08.17 20:40~23:40
장소: 온라인(google meet)
활동 요약: 모의 해킹, 시나리오 풀이 및 공유
참여자: 김채윤, 박기조, 배승원, 이효관, 임성주

시나리오 목표: 웹서비스를 이용하여 서버에 침투하고 이를 이용해 flag를 휙득하라(flag 형식은 flag{*})

/login
username과 pw를 입력받아 로그인을 하는 엔드포인트이다
주어진 계정 정보가 없으므로 추측을 하여 우회를 시도하자

sql injection은 sql을 사용하여 로그인 시스템을 구성할 때 입력값을 제대로 검증하지 않고 그대로 삽입하여 임의의 sql을 삽입할 수 있다
SELECT username, passwd FROM users WHERE username = '$input_user' AND passwd = '$input_pass';
다음과 같은 로직에서 username과 pw과 db에 존재하여야 한다는 조건을 우회하기 위하여 password에 'or'1'='1'을 입력하게 된다면 
SELECT username, passwd FROM users WHERE username = '$input_user' AND passwd = '' or '1' = '1';이라고 인식하여 실제 값의 존재 유무와 상관없이 로그인을 할 수 있다

/upload
로그인을 하면 파일을 선택하여 업로드 할 수 있는 엔드포인트에 접근할 수 있다
파일을 업로드하면 해당 파일의 내용이 /uploads/filename 경로에 업로드 되는것을 알 수 있다

파일이 업로드되니 혹시나 중요한 정보(크리덴셜)이 노출되었는지는 않았는지 몇가지를 확인해보았고
/uploads/secret.txt 에서 ssh 정보를 찾게 되었다

얻은 ssh id, pw로 서버에 접속하면 .myfile에 ssh 정보와 note가 있는데
note에 적힌 내용은 kernel update가 필요하며 5.10이라고 하는데 이는 dirty pipe 취약점을 악용가능한 버전이므로
git에서 exploit 코드를 복사하여 임의의 디렉토리에 파일을 생성하고
컴파일하여 루트권한을 얻을 수 있다

루트 권한을 얻은 후 루트 디렉토리에서 ls -la를 시도하여 secret을 읽으면 flag를 얻을 수 있다
